# ğŸ›¡ï¸ API de AutenticaÃ§Ã£o com JWT (Node.js + Express + MongoDB)

Este projeto Ã© uma aplicaÃ§Ã£o backend com autenticaÃ§Ã£o de usuÃ¡rios via **JWT**, utilizando **Node.js**, **Express** e **MongoDB**, seguindo uma arquitetura em camadas.

## ğŸ“ Estrutura de DiretÃ³rios

.

â”œâ”€â”€ app.js

â”œâ”€â”€ controllers

â”œâ”€â”€ database

â”œâ”€â”€ middlewares

â”œâ”€â”€ models

â”œâ”€â”€ node_modules

â”œâ”€â”€ package.json

â”œâ”€â”€ package-lock.json

â”œâ”€â”€ README.MD

â”œâ”€â”€ requests

â”œâ”€â”€ routes

â””â”€â”€ services

## âš™ï¸ InstalaÃ§Ã£o

```bash
git clone https://github.com/Gustavo-Cruzz/AV2FullStack.git
cd seu-repo
npm install
``` 

Crie um arquivo .env com os seguintes valores:

```bash
PORT=3000
MONGO_URI=mongodb://localhost:27017/backendApp
JWT_SECRET=sua_chave_secreta
```

## â–¶ï¸ ExecuÃ§Ã£o
Ambiente de desenvolvimento:

```bash
npm run dev

Ambiente de produÃ§Ã£o:

npm start
```

## ğŸ§ª Testes via Terminal

A pasta requests/ contÃ©m scripts de testes automatizados com curl. Para executÃ¡-los, use:

chmod +x requests/*.sh  # (apenas uma vez para tornar executÃ¡veis)
./requests/register_success.sh

## ğŸ” Lista de testes incluÃ­dos:
Teste	Arquivo
âœ… Registro bem-sucedido	          register_success.sh
âŒ E-mail duplicado	                register_email_duplicado.sh
âŒ Senha invÃ¡lida	                  register_senha_invalida.sh
âŒ E-mail invÃ¡lido	                register_email_invalido.sh
âŒ JSON mal formatado (registro)	  register_mal_formatado.sh
âœ… Login bem-sucedido	              login_success.sh
âŒ Login com e-mail nÃ£o cadastrado	login_email_invalido.sh
âŒ Login com senha errada	          login_senha_errada.sh
âŒ JSON mal formatado (login)	      login_mal_formatado.sh
âœ… Acesso com token vÃ¡lido	        protected_token_valido.sh
âŒ Acesso sem token	                protected_sem_token.sh
âŒ Acesso com token invÃ¡lido	      protected_token_invalido.sh
âŒ Token mal formatado	            protected_mal_formatado.sh

---

## ğŸ“š Recurso: Livros Lidos (`Book`)

UsuÃ¡rios autenticados podem gerenciar sua prÃ³pria lista de livros lidos. Cada livro contÃ©m:

* **TÃ­tulo** (`title`)
* **Autor** (`author`)
* **Valor** (`value`)
* **Nota (1 a 10)** (`rating`)
* **AnÃ¡lise textual** (`analysis`)

---

---

## ğŸ“Œ Endpoints disponÃ­veis

| MÃ©todo | Rota             | DescriÃ§Ã£o                            |
| ------ | ---------------- | ------------------------------------ |
| POST   | `/api/books`     | Cria um novo livro                   |
| GET    | `/api/books`     | Lista todos os livros do usuÃ¡rio     |
| GET    | `/api/books/:id` | Detalha um livro especÃ­fico          |
| PUT    | `/api/books/:id` | Atualiza todos os dados de um livro  |
| PATCH  | `/api/books/:id` | Atualiza parte dos dados de um livro |
| DELETE | `/api/books/:id` | Remove um livro                      |

---

## ğŸ§ª Testes de livros com curl

Scripts na pasta `requests/`:

| Arquivo                          | DescriÃ§Ã£o                                         |
| -------------------------------- | ------------------------------------------------- |
| `book_create_success.sh`         | CriaÃ§Ã£o de livro bem-sucedida                     |
| `book_create_sem_token.sh`       | Tentativa sem token                               |
| `book_create_dados_invalidos.sh` | Envio com dados invÃ¡lidos                         |
| `book_get_all.sh`                | Listar todos os livros                            |
| `book_get_by_id.sh`              | Ver detalhes de um livro                          |
| `book_update_put.sh`             | AtualizaÃ§Ã£o total via PUT                         |
| `book_update_patch.sh`           | AtualizaÃ§Ã£o parcial via PATCH                     |
| `book_delete.sh`                 | RemoÃ§Ã£o de livro                                  |
| `book_get_outro_usuario.sh`      | Teste de acesso indevido a livro de outro usuÃ¡rio |

---

## âœ… Boas prÃ¡ticas atendidas

* JWT obrigatÃ³rio em todas as rotas
* Dados isolados por usuÃ¡rio
* ValidaÃ§Ãµes de campos
* CRUD completo implementado
* Respostas e status HTTP apropriados
* Logs no console de aÃ§Ãµes e erros
* Uso de variÃ¡veis de ambiente com `.env`

---


## ğŸ§¾ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. 
